{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <title>Edit Expense</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <link href="{% static 'css/tailwind.min.css' %}" rel="stylesheet" />
  <link href="https://fonts.cdnfonts.com/css/mona-sans" rel="stylesheet" />
  <style>
    :root { --brand:#075131; }
    body { font-family: 'Mona-Sans', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji'; }
    .brand-bg { background-color: var(--brand); }
    .brand-bg-hover:hover { background-color: #06412a; }
  </style>
</head>
<body class="min-h-screen h-full bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4 text-gray-900 dark:text-gray-100">
  <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow ring-1 ring-gray-200 dark:ring-white/10 max-w-md w-full">
    <h2 class="text-2xl font-bold brand-text mb-6 text-center">Edit Expense</h2>
    
    <form method="POST" enctype="multipart/form-data" class="space-y-4">
      {% csrf_token %}
 
      <!-- Title -->
      <div>
        <label class="block text-sm mb-1" for="title">Title</label>
        <input id="title" name="title" type="text" value="{{ expense.title }}" required class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-indigo-500" />
      </div>
 
      <!-- Amount -->
      <div>
        <label class="block text-sm mb-1" for="amount">Amount</label>
        <input id="amount" name="amount" type="number" value="{{ expense.amount }}" required class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-indigo-500" />
      </div>
 
      <!-- Category Dropdown -->
      <div>
        <label class="block text-sm mb-1" for="category">Category</label>
        <select id="category" name="category" required class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-indigo-500">
          <option value="Meals" {% if expense.category == "Meals" %}selected{% endif %}>Meals</option>
          <option value="Office Supplies" {% if expense.category == "Office Supplies" %}selected{% endif %}>Office Supplies</option>
          <option value="Travel" {% if expense.category == "Travel" %}selected{% endif %}>Travel</option>
          <option value="Others" {% if expense.category == "Others" %}selected{% endif %}>Others</option>
        </select>
      </div>
 
      <!-- Date -->
      <div>
        <label class="block text-sm mb-1" for="date">Date</label>
        <input id="date" name="date" type="date" value="{{ expense.date|date:'Y-m-d' }}" required class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-indigo-500" />
      </div>
 
      <!-- Invoice Upload -->
      <div class="pt-2">
        <label class="block text-sm mb-1" for="invoice">Upload New Invoice (optional)</label>
        <input id="invoice" type="file" name="invoice" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700" />
        
        {% if expense.invoice %}
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-300">
            Current: <a href="{{ expense.invoice.url }}" target="_blank" class="text-blue-600 dark:text-blue-400 underline">View File</a>
          </p>
          <div class="mt-2">
            <label class="inline-flex items-center">
              <input type="checkbox" name="delete_invoice" class="form-checkbox text-red-600">
              <span class="ml-2 text-sm text-red-600">Delete current invoice</span>
            </label>
          </div>
        {% else %}
          <p class="mt-2 text-sm text-gray-500">No file uploaded.</p>
        {% endif %}
      </div>
 
      <!-- Buttons -->
      <div class="flex justify-between pt-2">
        <a href="{% url 'my_submissions' %}" class="text-sm text-gray-600 dark:text-gray-300 hover:underline">‚Üê Cancel</a>
        <button type="submit" class="brand-bg brand-bg-hover text-white px-6 py-2 rounded-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2">Update</button>
      </div>
    </form>
  </div>
</body>
</html>